<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSagesse, une étude biblique de l'épître de Jacques</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 300;
            background-color: #F2EDE4;
            color: #4A4A4A;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #F2EDE4;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .navbar {
            background-color: #4A5D4B;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        .header {
            background-color: #5B6F5C;
            color: #F2EDE4;
            padding: 20px;
            text-align: center;
        }
        .logout-btn {
            background: rgba(242, 237, 228, 0.2);
            color: #F2EDE4;
            border: 1px solid rgba(242, 237, 228, 0.3);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        .logout-btn:hover {
            background: rgba(242, 237, 228, 0.3);
        }
        .burger-menu {
            cursor: pointer;
            z-index: 1001;
        }
        .burger-icon {
            width: 25px;
            height: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .burger-line {
            width: 100%;
            height: 2px;
            background: #F2EDE4;
            transition: all 0.3s ease;
            transform-origin: center;
        }
        .burger-menu.active .burger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        .burger-menu.active .burger-line:nth-child(2) {
            opacity: 0;
        }
        .burger-menu.active .burger-line:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        .nav-overlay {
            position: fixed;
            top: 0;
            left: -300px;
            width: 280px;
            height: 100vh;
            background: #5B6F5C;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 60px 20px 20px;
        }
        .nav-overlay.active {
            left: 0;
        }
        .nav-overlay h3 {
            color: #F2EDE4;
            margin-bottom: 30px;
            font-size: 18px;
            text-align: center;
            border-bottom: 1px solid rgba(242, 237, 228, 0.3);
            padding-bottom: 15px;
        }
        .nav-overlay a {
            display: block;
            color: #F2EDE4;
            text-decoration: none;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 14px;
            border: 1px solid transparent;
        }
        .nav-overlay a:hover {
            background: rgba(242, 237, 228, 0.1);
            border-color: rgba(242, 237, 228, 0.2);
        }
        .nav-overlay a.current {
            background: rgba(242, 237, 228, 0.2);
            border-color: #F2EDE4;
            font-weight: 500;
        }
        .nav-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 999;
        }
        .nav-backdrop.active {
            display: block;
        }
        .content {
            padding: 20px;
        }
        .progress-section {
            background-color: rgba(180, 193, 166, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #B4C1A6;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: rgba(160, 126, 95, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .progress-fill {
            height: 100%;
            background-color: #5B6F5C;
            transition: width 0.3s ease;
        }
        .day-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .day-nav-btn {
            padding: 8px 16px;
            background-color: rgba(180, 193, 166, 0.5);
            border: 1px solid #B4C1A6;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            color: #4A4A4A;
        }
        .day-nav-btn:hover {
            background-color: #B4C1A6;
        }
        .day-nav-btn.active {
            background-color: #5B6F5C;
            color: #F2EDE4;
            border-color: #5B6F5C;
        }
        .day-section {
            display: none;
            min-height: 60vh;
        }
        .day-section.active {
            display: block;
        }
        .header h1 {
            font-weight: 300;
            letter-spacing: 1px;
        }
        .day-badge {
            background-color: #A07E5F;
            color: #F2EDE4;
            padding: 12px 24px;
            display: inline-block;
            font-weight: 500;
            margin-bottom: 20px;
            font-size: 16px;
            border-radius: 4px;
            letter-spacing: 0.5px;
        }
        .verse-reference {
            background-color: #806650;
            color: #F2EDE4;
            padding: 8px 16px;
            display: inline-block;
            font-size: 14px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-weight: 400;
        }
        .question {
            margin-bottom: 25px;
            padding: 20px;
            background-color: rgba(242, 237, 228, 0.8);
            border-radius: 8px;
            position: relative;
            border: 1px solid rgba(180, 193, 166, 0.4);
        }
        .question-number {
            margin-bottom: 15px;
            font-size: 15px;
            line-height: 1.6;
            font-weight: 400;
        }
        .text-input {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #B4C1A6;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
            background-color: rgba(242, 237, 228, 0.9);
            color: #4A4A4A;
        }
        .text-input:focus {
            outline: none;
            border-color: #5B6F5C;
            background-color: #F2EDE4;
        }
        .save-status {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 12px;
            color: #5B6F5C;
            display: none;
        }
        .save-status.saving {
            display: block;
            color: #A07E5F;
        }
        .save-status.saved {
            display: block;
            color: #5B6F5C;
        }
        .recap-section {
            background-color: #5B6F5C;
            color: #F2EDE4;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
        }
        .recap-section h3 {
            color: #F2EDE4;
            margin-bottom: 15px;
        }
        .recap-section .question {
            background-color: rgba(242, 237, 228, 0.95);
            border: 1px solid rgba(242, 237, 228, 0.8);
            color: #4A4A4A;
        }
        .recap-section .question-number {
            color: #4A4A4A;
        }
        .recap-section .instruction-text {
            color: #5B6F5C;
            opacity: 0.8;
        }
        .group-section {
            background-color: #806650;
            color: #F2EDE4;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
        }
        .group-section h3 {
            color: #F2EDE4;
            margin-bottom: 15px;
        }
        .group-section .question {
            background-color: rgba(242, 237, 228, 0.95);
            border: 1px solid rgba(128, 102, 80, 0.6);
            color: #4A4A4A;
        }
        .group-section .question-number {
            color: #4A4A4A;
        }
        .group-section .instruction-text {
            color: #806650;
            opacity: 0.8;
        }
        .group-section .text-input {
            border: 2px solid #806650;
        }
        .group-section .text-input:focus {
            border-color: #4A4A4A;
        }
        .instruction-text {
            font-style: italic;
            color: #4A4A4A;
            font-size: 14px;
            margin-top: 10px;
            opacity: 0.8;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px 0;
        }
        .nav-btn {
            background-color: #5B6F5C;
            color: #F2EDE4;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: 400;
            font-family: 'Inter', sans-serif;
        }
        .nav-btn:hover {
            background-color: #4A5A4B;
            transform: translateY(-1px);
        }
        .nav-btn:disabled {
            background-color: rgba(180, 193, 166, 0.5);
            cursor: not-allowed;
            transform: none;
        }
        .day-indicator {
            font-size: 14px;
            color: #5B6F5C;
            font-weight: 400;
        }
        .intro-section {
            background-color: rgba(242, 237, 228, 0.9);
            border: 1px solid rgba(180, 193, 166, 0.6);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            display: none;
        }
        .intro-section.show {
            display: block;
        }
        .instruction-passage {
            font-weight: 600;
            color: #4A4A4A;
            margin-bottom: 20px;
            font-size: 15px;
        }
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            background-color: rgba(242, 237, 228, 0.9);
            border: 1px solid rgba(180, 193, 166, 0.6);
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .auth-container h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #5B6F5C;
            font-weight: 400;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 400;
            color: #4A4A4A;
        }
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #B4C1A6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            background-color: rgba(242, 237, 228, 0.9);
            color: #4A4A4A;
        }
        .form-group input:focus {
            outline: none;
            border-color: #5B6F5C;
            background-color: #F2EDE4;
        }
        .error-message {
            color: #A07E5F;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }
        .success-message {
            color: #5B6F5C;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }
        .auth-toggle {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }
        .auth-toggle a {
            color: #5B6F5C;
            text-decoration: none;
        }
        .auth-toggle a:hover {
            text-decoration: underline;
        }
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 18px;
            color: #806650;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(180, 193, 166, 0.3);
            border-top: 3px solid #5B6F5C;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .video-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }
        .ratio iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .responsive-video {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
        }
        .responsive-video iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .responsive-video .day-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 12px;
    z-index: 10;
}
    </style>
</head>
<body>
    <!-- Main App Container -->
    <div id="app" style="display: none;">
        <div class="container">
            <!-- Navbar séparée -->
            <div class="navbar">
                <!-- Menu Burger -->
                <div class="burger-menu" onclick="toggleNav()">
                    <div class="burger-icon">
                        <div class="burger-line"></div>
                        <div class="burger-line"></div>
                        <div class="burger-line"></div>
                    </div>
                </div>
                <a href="index.html" class="logout-btn">← Retour au tableau de bord</a>
            </div>
            <!-- Header principal -->
            <div class="header">
                <h3>Sagesse, une étude biblique de l'épître de Jacques</h3>
                <h1>Semaine 4 : Œuvres</h1>
            </div>
            <!-- Navigation Overlay -->
            <div class="nav-backdrop" onclick="closeNav()"></div>
            <div class="nav-overlay">
                <a href="introduction.html">Introduction</a>
                <a href="week1.html">Semaine 1 - Foi</a>
                <a href="week2.html">Semaine 2 - Obéissance</a>
                <a href="week3.html">Semaine 3 - Liberté</a>
                <a href="week4.html" class="current" >Semaine 4 - Œuvres</a>
                <a href="week5.html">Semaine 5 - Paroles</a>
                <a href="week6.html">Semaine 6 - Sagesses</a>
                <a href="week7.html">Semaine 7 - Humilité</a>
                <a href="week8.html">Semaine 8 - Persévérance</a>
            </div>
            <div class="content">
                <div class="intro-section" id="intro-section">
                    <div class="intro-text">
                        <p>Super ! Tu as bouclé la semaine 3. Cette semaine, nous allons aborder un débat fondamental qui a agité l'Église pendant des siècles : la foi ou les œuvres ?</p>
                        <p>Jacques nous emmène chez Abraham et Rahab pour nous montrer qu'une foi vivante produit toujours des fruits concrets. Ce n'est pas une question de performance, mais une authenticité qui se voit.</p>
                    </div>
                </div>
                <div class="progress-section">
                    <h3>Ta Progression</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                    <p>Tu as complété <span id="progressText">0%</span> de l'étude de cette semaine</p>
                </div>
                <div class="day-navigation">
                    <button class="day-nav-btn active" onclick="showDay(1)">Jour 1</button>
                    <button class="day-nav-btn" onclick="showDay(2)">Jour 2</button>
                    <button class="day-nav-btn" onclick="showDay(3)">Jour 3</button>
                    <button class="day-nav-btn" onclick="showDay(4)">Jour 4</button>
                    <button class="day-nav-btn" onclick="showDay(5)">Jour 5</button>
                </div>

                <!-- JOUR 1 -->
<div class="day-section active" id="day1">
    <div class="day-badge">JOUR 1</div>
    <div class="instruction-passage">Lis le passage de cette semaine : Jacques 2.14-26</div>
    <div class="question">
        <span class="save-status" id="status-w4j1q1">✓ Sauvegardé</span>
        <div class="question-number">
            1. Souligne les mots suivants : Foi, Oeuvres/actes, Mort/morte, Juste/justice. A l'aide des mots soulignés, quel est le point principal que Jacques veut faire comprendre dans ce passage ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j1q1"
            data-question="w4j1q1"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j1q2">✓ Sauvegardé</span>
        <div class="question-number">
            2. Quelle est la relation entre foi et œuvres que Jacques veut faire comprendre ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j1q2"
            data-question="w4j1q2"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j1q3">✓ Sauvegardé</span>
        <div class="question-number">
            3. Comment Jacques distingue-t-il une foi vivante d'une foi morte ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j1q3"
            data-question="w4j1q3"
        ></textarea>
    </div>
    <div class="day-badge">Vidéo du jour</div>
<div class="responsive-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/VQyx0n0Et6Q?si=CY3k6WxQ8XNyvvDr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
    <div class="navigation-buttons">
        <button class="nav-btn" id="prevBtn" onclick="previousDay()" disabled>← Précédent</button>
        <div class="day-indicator">Jour 1 sur 5</div>
        <button class="nav-btn" id="nextBtn" onclick="nextDay()">Suivant →</button>
    </div>
</div>

<!-- JOUR 2 -->
<div class="day-section" id="day2">
    <div class="day-badge">JOUR 2</div>
    <div class="instruction-passage">Maintenant regarde de plus près Jacques 2.14-18</div>
    <div class="question">
        <span class="save-status" id="status-w4j2q1">✓ Sauvegardé</span>
        <div class="question-number">
            4. Quelle est la réaction de la personne face aux besoins de son frère ou de sa sœur ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j2q1"
            data-question="w4j2q1"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j2q2">✓ Sauvegardé</span>
        <div class="question-number">
            5. Quelle est la conclusion que Jacques tire de cet exemple dans le verset 17 ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j2q2"
            data-question="w4j2q2"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j2q3">✓ Sauvegardé</span>
        <div class="question-number">
            6. Quel serait le comportement à adopter vis-à-vis de ce frère ou de cette sœur en difficulté ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j2q3"
            data-question="w4j2q3"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j2q4">✓ Sauvegardé</span>
        <div class="question-number">
            7. Que veut-il dire par : « Montre-moi ta foi sans les œuvres » ? Est-ce même possible ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j2q4"
            data-question="w4j2q4"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j2q5">✓ Sauvegardé</span>
        <div class="question-number">
            8. Que veut dire Jacques quand il affirme que la foi sans les œuvres est « morte en elle-même » ? Est-ce une figure exagérée ou un vrai diagnostic spirituel ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j2q5"
            data-question="w4j2q5"
        ></textarea>
    </div>
        <div class="question">
        <div class="question-number">
Pas de vidéo aujourd'hui ! Mais je t'invite à méditer sur ces quelques versets. Prends ton temps, relis-les plusieurs fois, et laisse le Saint-Esprit te parler personnellement.
        </div>
    </div>
    <div class="navigation-buttons">
        <button class="nav-btn" id="prevBtn" onclick="previousDay()">← Précédent</button>
        <div class="day-indicator">Jour 2 sur 5</div>
        <button class="nav-btn" id="nextBtn" onclick="nextDay()">Suivant →</button>
    </div>
</div>

<!-- JOUR 3 -->
<div class="day-section" id="day3">
    <div class="day-badge">JOUR 3</div>
    <div class="instruction-passage">Maintenant regarde Jacques 2.19-20</div>
    <div class="question">
        <span class="save-status" id="status-w4j3q1">✓ Sauvegardé</span>
        <div class="question-number">
            9. Quelle est la croyance des démons exposée par Jacques ici ? Que croient-ils sur Dieu ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j3q1"
            data-question="w4j3q1"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j3q2">✓ Sauvegardé</span>
        <div class="question-number">
            10. Que signifie l'expression « et ils tremblent » ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j3q2"
            data-question="w4j3q2"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j3q3">✓ Sauvegardé</span>
        <div class="question-number">
            11. Pourquoi Jacques utilise-t-il les démons comme exemple ici ? Que veut-il démontrer ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j3q3"
            data-question="w4j3q3"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j3q4">✓ Sauvegardé</span>
        <div class="question-number">
            12. Peut-on dire que Jacques fait une distinction ici entre croire des vérités sur Dieu et avoir une foi vivante en Dieu ? Quelle est la différence ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j3q4"
            data-question="w4j3q4"
        ></textarea>
    </div>
        <div class="day-badge">Vidéo du jour</div>
<div class="responsive-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/nLza4x2tme8?si=4xZfFPLc5y3STckX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
    <div class="navigation-buttons">
        <button class="nav-btn" id="prevBtn" onclick="previousDay()">← Précédent</button>
        <div class="day-indicator">Jour 3 sur 5</div>
        <button class="nav-btn" id="nextBtn" onclick="nextDay()">Suivant →</button>
    </div>
</div>

<!-- JOUR 4 -->
<div class="day-section" id="day4">
    <div class="day-badge">JOUR 4</div>
    <div class="instruction-passage">Maintenant regarde Jacques 2.21-26</div>
    <div class="question">
        <span class="save-status" id="status-w4j4q1">✓ Sauvegardé</span>
        <div class="question-number">
            13. Qui est Abraham et pourquoi a-t-il été considéré comme juste ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q1"
            data-question="w4j4q1"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q2">✓ Sauvegardé</span>
        <div class="question-number">
            14. Comment la foi pourrait-elle être menée à la perfection ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q2"
            data-question="w4j4q2"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q3">✓ Sauvegardé</span>
        <div class="question-number">
            15. Quel est le verset cité par Jacques ici ? Où se trouve-t-il dans la Bible ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q3"
            data-question="w4j4q3"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q4">✓ Sauvegardé</span>
        <div class="question-number">
            16. Qui est Rahab et pourquoi a-t-elle été considérée comme juste ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q4"
            data-question="w4j4q4"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q5">✓ Sauvegardé</span>
        <div class="question-number">
            17. Quelle comparaison finale Jacques utilise-t-il au verset 26 pour résumer tout son enseignement ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q5"
            data-question="w4j4q5"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q6">✓ Sauvegardé</span>
        <div class="question-number">
            18. Que peut vouloir dire « déclaré juste » ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q6"
            data-question="w4j4q6"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j4q7">✓ Sauvegardé</span>
        <div class="question-number">
            19. Pourquoi Jacques choisit-il les exemples d'Abraham et de Rahab ? Quelle vérité veut-il montrer sur la justice ? Sur la foi ? Sur les oeuvres ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j4q7"
            data-question="w4j4q7"
        ></textarea>
    </div>
        <div class="day-badge">Vidéo du jour</div>
<div class="responsive-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/bWs-inhGZzw?si=Q4F0pzPNLx21ksr8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
    <div class="navigation-buttons">
        <button class="nav-btn" id="prevBtn" onclick="previousDay()">← Précédent</button>
        <div class="day-indicator">Jour 4 sur 5</div>
        <button class="nav-btn" id="nextBtn" onclick="nextDay()">Suivant →</button>
    </div>
</div>

<!-- JOUR 5 - Récap de la semaine -->
<div class="day-section" id="day5">
    <div class="day-badge">JOUR 5</div>
  <div class="recap-section">
        <h3>Allons en profondeur... relis toute la section de la semaine Jacques 2.14-26</h3>
    <div class="question">
        <span class="save-status" id="status-w4j5q1">✓ Sauvegardé</span>
        <div class="question-number">
            20. Jacques indique qu'Abraham fut appelé ami de Dieu. Qu'est-ce que cela t'évoque sur la relation entre Dieu et Abraham ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j5q1"
            data-question="w4j5q1"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j5q2">✓ Sauvegardé</span>
        <div class="question-number">
            21. Peut-on nous aussi devenir amis de Dieu ? Si oui, comment ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j5q2"
            data-question="w4j5q2"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j5q3">✓ Sauvegardé</span>
        <div class="question-number">
            22. Que révèle ce passage sur le type de foi que Dieu recherche ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j5q3"
            data-question="w4j5q3"
        ></textarea>
    </div>
    <div class="question">
        <span class="save-status" id="status-w4j5q4">✓ Sauvegardé</span>
        <div class="question-number">
            23. Comment pourrais-tu montrer ta foi par tes œuvres dans ta famille, ton église ou ton travail ?
        </div>
        <textarea
            class="text-input"
            placeholder="Saisis ta réponse ici"
            id="w4j5q4"
            data-question="w4j5q4"
        ></textarea>
    </div>
        <div class="day-badge">Vidéo du jour</div>
<div class="responsive-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/U6Pw51kVDkI?si=uzv8onDl3jB0VGsK" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
      </div>
    <!-- Questions groupes -->
    <div class="group-section">
        <h3>Questions à se poser en groupe</h3>
        <div class="question">
            <span class="save-status" id="status-groupe1">✓ Sauvegardé</span>
            <div class="question-number">
                1. Parmi les exemples présentés par Jacques, lequel t'a le plus marqué et pourquoi ?
            </div>
        </div>
        <div class="question">
            <span class="save-status" id="status-groupe2">✓ Sauvegardé</span>
            <div class="question-number">
                2. Quelle vérité sur la foi t'a le plus interpellé dans ce passage ?
            </div>
        </div>
        <div class="question">
            <span class="save-status" id="status-groupe3">✓ Sauvegardé</span>
            <div class="question-number">
                3. Qu'est-ce que cela changerait dans notre quotidien si nous vivions chaque jour en disant : « Ma foi doit se voir » ?
            </div>
        </div>
    </div>
    <div class="navigation-buttons">
        <button class="nav-btn" id="prevBtn" onclick="previousDay()">← Précédent</button>
        <div class="day-indicator">Jour 5 sur 5</div>
        <button class="nav-btn" id="nextWeekBtn" onclick="window.location.href='week5.html'">Semaine 5 →</button>
    </div>
</div>
                
    <!-- Auth Container -->
    <div id="authContainer" class="auth-container">
        <!-- Login Form -->
        <div id="loginForm">
            <h2>Connecte-toi à ton compte</h2>
            <form onsubmit="login(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="nav-btn" style="width: 100%; padding: 12px;">
                    Se connecter
                </button>
            </form>
            <div id="loginError" class="error-message"></div>
            <div class="auth-toggle">
                Pas de compte ? <a href="#" onclick="showSignup()">Inscris-toi</a>
            </div>
            <div class="auth-toggle">
                <a href="#" onclick="showPasswordReset()">Mot de passe oublié ?</a>
            </div>
        </div>
        <!-- Signup Form -->
        <div id="signupForm" style="display: none;">
            <h2>Crée ton compte</h2>
            <form onsubmit="signup(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="signupPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label>Confirme ton mot de passe</label>
                    <input type="password" id="confirmPassword" required minlength="6">
                </div>
                <button type="submit" class="nav-btn" style="width: 100%; padding: 12px;">
                    Créer le compte
                </button>
            </form>
            <div id="signupError" class="error-message"></div>
            <div id="signupSuccess" class="success-message"></div>
            <div class="auth-toggle">
                Déjà un compte ? <a href="#" onclick="showLogin()">Connecte-toi</a>
            </div>
        </div>
        <!-- Password Reset Form -->
        <div id="resetForm" style="display: none;">
            <h2>Réinitialise ton mot de passe</h2>
            <p style="text-align: center; margin-bottom: 20px; color: #4A4A4A; font-size: 14px;">
                Entre ton adresse email et nous t'enverrons un lien pour réinitialiser ton mot de passe.
            </p>
            <form onsubmit="resetPassword(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="resetEmail" required>
                </div>
                <button type="submit" class="nav-btn" style="width: 100%; padding: 12px;">
                    Envoyer le lien
                </button>
            </form>
            <div id="resetError" class="error-message"></div>
            <div id="resetSuccess" class="success-message"></div>
            <div class="auth-toggle">
                Tu te souviens de ton mot de passe ? <a href="#" onclick="showLogin()">Retour à la connexion</a>
            </div>
        </div>
    </div>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading" style="display: none;">
        <div class="spinner"></div>
        <p>Chargement...</p>
    </div>
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import {
            getAuth,
            onAuthStateChanged,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            sendPasswordResetEmail,
            signOut
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            serverTimestamp,
            collection,
            getDocs
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyAd6w-OZx1oQpZ4DmWYqi7jpGULlht6dhY",
            authDomain: "james-bible-study.firebaseapp.com",
            projectId: "james-bible-study",
            storageBucket: "james-bible-study.firebasestorage.app",
            messagingSenderId: "172028681652",
            appId: "1:172028681652:web:ce71ca95d9b4395e14a6e1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let saveTimeout = null;
        let currentDay = 1;
        let currentUser = null;
        const validPages = ['index.html', 'week2.html', 'week3.html', 'week4.html', 'week5.html', 'week6.html', 'week7.html', 'week8.html'];

        window.login = login;
        window.signup = signup;
        window.logout = logout;
        window.resetPassword = resetPassword;
        window.showLogin = showLogin;
        window.showSignup = showSignup;
        window.showPasswordReset = showPasswordReset;
        window.showAuth = showAuth;
        window.showDay = showDay;
        window.nextDay = nextDay;
        window.previousDay = previousDay;
        window.goToNextWeek = goToNextWeek;
        window.toggleNav = toggleNav;
        window.closeNav = closeNav;

        onAuthStateChanged(auth, async (user) => {
            console.log('onAuthStateChanged triggered', user ? 'User logged in: ' + user.email : 'User logged out');
            if (user) {
                currentUser = user;
                try {
                    const userDoc = await getDoc(doc(db, 'users', user.uid));
                    const lastPage = userDoc.exists() && userDoc.data().lastPage && validPages.includes(userDoc.data().lastPage) ? userDoc.data().lastPage : 'index.html';
                    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                    const isLogin = localStorage.getItem('isLogin') === 'true';
                    if (isLogin && currentPage !== lastPage) {
                        console.log(`Redirecting to last page: ${lastPage}`);
                        localStorage.removeItem('isLogin');
                        window.location.href = lastPage;
                    } else {
                        console.log('No redirection needed, showing app');
                        localStorage.removeItem('isLogin');
                        showApp();
                        loadResponses();
                    }
                } catch (error) {
                    console.error('Error loading last page:', error);
                    localStorage.removeItem('isLogin');
                    showApp();
                    loadResponses();
                }
            } else {
                currentUser = null;
                showAuth();
            }
        });

        function showApp() {
            console.log('showApp() called');
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('app').style.display = 'block';
        }

        function showAuth() {
            console.log('showAuth() called');
            const authContainer = document.getElementById('authContainer');
            const app = document.getElementById('app');
            const loadingScreen = document.getElementById('loadingScreen');
            if (authContainer) {
                authContainer.style.display = 'block';
                authContainer.style.visibility = 'visible';
            }
            if (app) app.style.display = 'none';
            if (loadingScreen) loadingScreen.style.display = 'none';
            console.log('showAuth() completed');
        }

        function showLoading() {
            console.log('showLoading() called');
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('loadingScreen').style.display = 'block';
            document.getElementById('app').style.display = 'none';
        }

        function showLogin() {
            console.log('showLogin() called');
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('resetForm').style.display = 'none';
            clearErrors();
        }

        function showSignup() {
            console.log('showSignup() called');
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
            document.getElementById('resetForm').style.display = 'none';
            clearErrors();
        }

        function showPasswordReset() {
            console.log('showPasswordReset() called');
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('resetForm').style.display = 'block';
            clearErrors();
        }

        function clearErrors() {
            console.log('clearErrors() called');
            document.getElementById('loginError').textContent = '';
            document.getElementById('signupError').textContent = '';
            document.getElementById('signupSuccess').textContent = '';
            document.getElementById('resetError').textContent = '';
            document.getElementById('resetSuccess').textContent = '';
        }

        async function login(event) {
            console.log('login() called');
            event.preventDefault();
            clearErrors();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            console.log('Email:', email, 'Password length:', password.length);
            try {
                showLoading();
                await signInWithEmailAndPassword(auth, email, password);
                console.log('Login successful');
                localStorage.setItem('isLogin', 'true');
            } catch (error) {
                console.error('Login error:', error);
                showAuth();
                document.getElementById('loginError').textContent = getErrorMessage(error);
            }
        }

        async function signup(event) {
            console.log('signup() called');
            event.preventDefault();
            clearErrors();
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            if (password !== confirmPassword) {
                document.getElementById('signupError').textContent = 'Les mots de passe ne correspondent pas';
                return;
            }
            try {
                showLoading();
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                await setDoc(doc(db, 'users', userCredential.user.uid), {
                    email: email,
                    createdAt: serverTimestamp(),
                    progress: {},
                    lastPage: 'index.html'
                });
                console.log('Signup successful');
                document.getElementById('signupSuccess').textContent = 'Compte créé avec succès ! Connexion en cours...';
                localStorage.setItem('isLogin', 'true');
                setTimeout(() => showApp(), 2000);
            } catch (error) {
                console.error('Signup error:', error);
                showAuth();
                document.getElementById('signupError').textContent = getErrorMessage(error);
            }
        }

        async function logout() {
            console.log('logout() called');
            const logoutBtn = document.querySelector('.logout-btn');
            logoutBtn.disabled = true;
            try {
                if (currentUser) {
                    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                    await updateDoc(doc(db, 'users', currentUser.uid), {
                        lastPage: currentPage
                    });
                    console.log('Last page saved:', currentPage);
                }
                await signOut(auth);
                console.log('Sign out successful');
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = 'index.html';
            } finally {
                logoutBtn.disabled = false;
            }
        }

        async function resetPassword(event) {
            console.log('resetPassword() called');
            event.preventDefault();
            clearErrors();
            const email = document.getElementById('resetEmail').value;
            try {
                await sendPasswordResetEmail(auth, email);
                document.getElementById('resetSuccess').textContent =
                    'Email de réinitialisation envoyé ! Vérifie ta boîte de réception et suis les instructions.';
                document.getElementById('resetEmail').value = '';
            } catch (error) {
                console.error('Reset password error:', error);
                let errorMessage = 'Échec de l\'envoi de l\'email. ';
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage += 'Aucun compte trouvé avec cette adresse email.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage += 'Veuillez entrer une adresse email valide.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage += 'Trop de tentatives. Réessaie plus tard.';
                        break;
                    default:
                        errorMessage += 'Réessaie plus tard.';
                }
                document.getElementById('resetError').textContent = errorMessage;
            }
        }

        function getErrorMessage(error) {
            console.log('getErrorMessage() called', error.code);
            switch(error.code) {
                case 'auth/user-not-found':
                    return 'Aucun compte trouvé avec cette adresse email.';
                case 'auth/wrong-password':
                    return 'Mot de passe incorrect.';
                case 'auth/invalid-email':
                    return 'Adresse email non valide.';
                case 'auth/user-disabled':
                    return 'Ce compte a été désactivé.';
                case 'auth/too-many-requests':
                    return 'Trop de tentatives échouées. Réessaie plus tard.';
                case 'auth/email-already-in-use':
                    return 'Cette adresse email est déjà utilisée.';
                case 'auth/weak-password':
                    return 'Le mot de passe doit contenir au moins 6 caractères.';
                case 'auth/network-request-failed':
                    return 'Erreur de connexion. Vérifie ta connexion internet.';
                default:
                    return 'Une erreur est survenue. Réessaie plus tard.';
            }
        }

        function showDay(dayNumber) {
            console.log('showDay() called with day:', dayNumber);
            const allDays = document.querySelectorAll('.day-section');
            allDays.forEach(day => day.classList.remove('active'));
            document.getElementById(`day${dayNumber}`).classList.add('active');
            const navButtons = document.querySelectorAll('.day-nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            navButtons[dayNumber - 1].classList.add('active');
            const introSection = document.getElementById('intro-section');
            if (dayNumber === 1) {
                introSection.classList.add('show');
            } else {
                introSection.classList.remove('show');
            }
            currentDay = dayNumber;
            updateProgress();
            window.scrollTo(0, 0);
        }

        function nextDay() {
            console.log('nextDay() called, currentDay:', currentDay);
            if (currentDay < 5) {
                showDay(currentDay + 1);
            }
        }

        function previousDay() {
            console.log('previousDay() called, currentDay:', currentDay);
            if (currentDay > 1) {
                showDay(currentDay - 1);
            }
        }

        async function goToNextWeek() {
    console.log('goToNextWeek() called');
    
    // Déterminer la semaine actuelle basée sur l'URL
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    let currentWeekNum = 1;
    let nextWeekNum = 2;
    let nextPage = 'week2.html';
    
    // Mapper la page actuelle au numéro de semaine
    const pageToWeek = {
        'index.html': 1,
        'week2.html': 2,
        'week3.html': 3,
        'week4.html': 4,
        'week5.html': 5,
        'week6.html': 6,
        'week7.html': 7,
        'week8.html': 8
    };
    
    currentWeekNum = pageToWeek[currentPage] || 1;
    nextWeekNum = currentWeekNum + 1;
    
    // Déterminer la page suivante
    if (nextWeekNum <= 8) {
        nextPage = nextWeekNum === 2 ? 'week2.html' : `week${nextWeekNum}.html`;
    } else {
        nextPage = 'end.html'; // Après la semaine 8, aller à la page de fin
    }
    
    // Construire la liste des semaines complétées
    const completedWeeks = [];
    for (let i = 1; i <= currentWeekNum; i++) {
        if (i === 1) {
            completedWeeks.push('week1');
        } else {
            completedWeeks.push(`week${i}`);
        }
    }
    
    if (currentUser) {
        try {
            await updateDoc(doc(db, 'users', currentUser.uid), {
                'studyProgress.currentWeek': nextWeekNum > 8 ? 'completed' : nextWeekNum,
                'studyProgress.completedWeeks': completedWeeks,
                lastPage: nextPage
            });
            window.location.href = nextPage;
        } catch (error) {
            console.error('Erreur lors de la transition:', error);
            window.location.href = nextPage;
        }
    } else {
        window.location.href = nextPage;
    }
}

        function toggleNav() {
            console.log('toggleNav() called');
            const burgerMenu = document.querySelector('.burger-menu');
            const navOverlay = document.querySelector('.nav-overlay');
            const navBackdrop = document.querySelector('.nav-backdrop');
            burgerMenu.classList.toggle('active');
            navOverlay.classList.toggle('active');
            navBackdrop.classList.toggle('active');
            if (navOverlay.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function closeNav() {
            console.log('closeNav() called');
            const burgerMenu = document.querySelector('.burger-menu');
            const navOverlay = document.querySelector('.nav-overlay');
            const navBackdrop = document.querySelector('.nav-backdrop');
            burgerMenu.classList.remove('active');
            navOverlay.classList.remove('active');
            navBackdrop.classList.remove('active');
            document.body.style.overflow = '';
        }

        async function saveResponse(questionId, value) {
    console.log('saveResponse() called for questionId:', questionId);
    const statusElement = document.getElementById(`status-${questionId}`);
    
    if (!statusElement) {
        console.error('Status element not found for:', questionId);
        return;
    }
    
    // Si la valeur est vide, supprimer la réponse
    if (!value || value.trim() === '') {
        console.log('Empty value detected, deleting response:', questionId);
        
        // Supprimer de localStorage
        localStorage.removeItem(questionId);
        
        // Supprimer de Firebase
        if (currentUser) {
            try {
                const userDocRef = doc(db, 'users', currentUser.uid);
                const userDoc = await getDoc(userDocRef);
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    const responses = userData.responses || {};
                    
                    // Supprimer la question si elle existe
                    if (responses[questionId]) {
                        delete responses[questionId];
                        
                        await setDoc(userDocRef, {
                            ...userData,
                            responses: responses
                        });
                        
                        console.log('Response deleted from Firebase:', questionId);
                    }
                }
            } catch (error) {
                console.error('Error deleting from Firebase:', error);
            }
        }
        
        statusElement.style.display = 'none';
        updateProgress();
        return;
    }
    
    // Sinon, sauvegarder normalement
    statusElement.className = 'save-status saving';
    statusElement.textContent = 'Sauvegarde...';
    statusElement.style.display = 'block';
    
    localStorage.setItem(questionId, value);
    
    if (currentUser) {
        try {
            const userDocRef = doc(db, 'users', currentUser.uid);
            const responseData = {
                [`responses.${questionId}`]: {
                    value: value,
                    updatedAt: new Date().toISOString(),
                    week: 4  // ⚠️ Change selon la semaine : week1=1, week2=2, etc.
                }
            };
            
            await updateDoc(userDocRef, responseData);
            
            console.log('Firebase save successful for:', questionId);
            statusElement.className = 'save-status saved';
            statusElement.textContent = '✓ Sauvegardé';
            statusElement.style.display = 'block';
        } catch (error) {
            console.error('Erreur Firebase:', error);
            
            if (error.code === 'not-found') {
                try {
                    await setDoc(userDocRef, {
                        email: currentUser.email,
                        responses: {
                            [questionId]: {
                                value: value,
                                updatedAt: new Date().toISOString(),
                                week: 4  // ⚠️ Change selon la semaine
                            }
                        }
                    }, { merge: true });
                    
                    statusElement.className = 'save-status saved';
                    statusElement.textContent = '✓ Sauvegardé';
                } catch (retryError) {
                    console.error('Retry failed:', retryError);
                    statusElement.className = 'save-status error';
                    statusElement.textContent = '⚠ Erreur (sauvé localement)';
                }
            } else {
                statusElement.className = 'save-status error';
                statusElement.textContent = '⚠ Erreur (sauvé localement)';
            }
        }
    } else {
        statusElement.className = 'save-status saved';
        statusElement.textContent = '✓ Sauvegardé (local)';
    }
    
    setTimeout(() => {
        statusElement.style.display = 'none';
    }, 3000);
    
    updateProgress();
}

        async function loadResponses() {
            console.log('loadResponses() called');
            const textareas = document.querySelectorAll('.text-input');
            if (currentUser) {
                try {
                    const responsesRef = collection(db, 'users', currentUser.uid, 'responses');
                    const snapshot = await getDocs(responsesRef);
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        const textarea = document.getElementById(data.questionId);
                        if (textarea) {
                            textarea.value = data.response;
                        }
                    });
                } catch (error) {
                    console.error('Erreur de chargement Firebase:', error);
                    loadFromLocalStorage(textareas);
                }
            } else {
                loadFromLocalStorage(textareas);
            }
            updateProgress();
        }

        function loadFromLocalStorage(textareas) {
            console.log('loadFromLocalStorage() called');
            textareas.forEach(textarea => {
                const savedValue = localStorage.getItem(textarea.dataset.question);
                if (savedValue) {
                    textarea.value = savedValue;
                }
            });
        }

        function updateProgress() {
            console.log('updateProgress() called');
            const textareas = document.querySelectorAll('.text-input');
            let completed = 0;
            textareas.forEach(textarea => {
                if (textarea.value.trim().length > 0) {
                    completed++;
                }
            });
            const percentage = Math.round((completed / textareas.length) * 100);
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '%';
        }

        document.addEventListener('DOMContentLoaded', () => {
    console.log('DOMContentLoaded event triggered');
    const hash = window.location.hash;
    let initialDay = 1; // Default to day 1
    if (hash) {
        const dayMatch = hash.match(/#day(\d+)/);
        if (dayMatch) {
            const dayNumber = parseInt(dayMatch[1]);
            if (dayNumber >= 1 && dayNumber <= 5) {
                console.log('Navigating to day:', dayNumber);
                initialDay = dayNumber;
            }
        }
    }
    showDay(initialDay); // Call showDay with the initial day
    const textareas = document.querySelectorAll('.text-input');
    textareas.forEach(textarea => {
        textarea.addEventListener('input', () => {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                saveResponse(textarea.dataset.question, textarea.value);
            }, 1000);
        });
    });
});

        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    previousDay();
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    nextDay();
                }
            }
        });
    </script>
</body>
</html>
